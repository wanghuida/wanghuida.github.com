---
layout: post
title: "创业公司的运维工作"
date: 2013-07-17 13:04
comments: true
sharing: true
footer: true
categories: [Share]
---

### 创业公司的运维工作应该尽可能简单，不用追求全自动化，但必要的工作还是要做的。
<br />

### 安全管理
    
1. 有权限的员工登录服务器需要使用*key*通过跳板机，再进入线上服务器
2. 外部的请求，需要通过_lb_转发才能访问，内部服务器无法直接提供服务
3. 内部的服务器访问外网需要通过proxy
4. 内部服务器保存操作记录
5. 加强ddos防护
6. 端口和ip的限制

```
                                                                                                
           +------+  +---------+        +-----+                                                 
           |  lb  |  |  proxy  |        | ssh |                                                 
           +------+  +---------+        +-----+                                                 
              |           ^                |                                                    
              v           |                |                                                   
          +--------------------------------|---+                                               
          |                                |   |                                                
          |         internal server     <--+   |                                                
          |                                    |                                                
          +------------------------------------+                                               
                                                                                                
```
<!-- more -->

### 服务器 (ubuntu)

1. 服务器上架下架，硬件故障（其实创业公司托管还不如用云服务）
2. 常用软件安装，更新，配置

### 数据库管理 (mysql)

1. 日志管理：2进制日志，错误日志，慢请求日志
2. 优化性能：读写分离，优化慢查询
3. 冷备，热备
4. 安全：限制访问ip, 权限最小化

### 监控报警 (cacti nagios)

1. 指定报警处理人
2. 添加报警，添加监控
3. 监控和报警本身状态的维护

### 图片服务 (mogilefs squid php memcache mysql)

1. 图片备份，必须存储2份以上
2. 图片服务优化
3. 图片服务日志分析，统计数据

### 信息更新 

1. 记录每台服务器上处理的job
2. 记录每台服务器上提供的服务
3. 其他重要信息

### 其他数据备份

1. svn,git备份
2. crontab 备份（有过-r直接删除的经验。。。）
3. 一些重要配置的备份

